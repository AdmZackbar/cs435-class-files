<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
    <title>Zach Wassynger - CS 435 - Project #7</title>
    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec4 vPosition;
        attribute vec3 vNormal;

        uniform mat4 projectionMatrix;

        varying vec3 normal, surfaceToLight, surfaceToView;
        
        void main()
        {
            vec3 lightPosition = vec3(0.4, 0.0, 0.0);
            vec3 viewPosition = vec3(0.0, 0.0, 0.0);

            normal = vNormal;
            surfaceToLight = lightPosition - vPosition.xyz;
            surfaceToView = viewPosition - vPosition.xyz;

            gl_Position = projectionMatrix * vPosition;
        }
    </script>
    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;

        varying vec3 normal, surfaceToLight, surfaceToView;

        void main()
        {
            vec4 fColor;
            float attenuation = 1.0;

            vec4 ambient = vec4(0.1, 0.1, 0.2, 1.0);
            vec4 diffuse = vec4(0.5, 0.5, 0.6, 1.0);
            vec4 specular = vec4(0.8, 0.8, 0.8, 1.0);
            float shininess = 100.0;

            vec3 normalDir = normalize(normal);
            vec3 surfaceToLightDir = normalize(surfaceToLight);
            vec3 surfaceToViewDir = normalize(surfaceToView);
            vec3 halfVector = normalize(surfaceToLightDir + surfaceToViewDir);

            float Kd = dot(surfaceToLightDir, normalDir);
            diffuse = max(Kd, 0.0) * diffuse;

            float Ks = pow(max(dot(normalDir, halfVector), 0.0), shininess);
            specular = Ks * specular;
            
            if(Kd < 0.0) {
                specular = vec4(0.0, 0.0, 0.0, 1.0);
            }

            fColor = ambient + attenuation*(diffuse + specular);
            fColor.a = 1.0;

            gl_FragColor = fColor;
        }
    </script>
    <script type="text/javascript" src="../Common/webgl-utils.js"></script>
    <script type="text/javascript" src="../Common/initShaders.js"></script>
    <script type="text/javascript" src="../Common/MV.js"></script>
    <script type="text/javascript" src="proj7.js"></script>
</head>
<body>
    <canvas id="gl-canvas" width="1024" height="576">
    Canvas was not loaded - Brower does not support HTML5.
    </canvas>
</body>
</html>
